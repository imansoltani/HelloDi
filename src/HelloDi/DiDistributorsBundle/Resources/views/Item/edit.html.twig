{% extends 'HelloDiDiDistributorsBundle:Tabs:ShowItemMaster.html.twig' %}

{% set tab = '1' %}

{% block title %}
    {{ 'Items' | trans ({}, "item") }}
{% endblock title %}

{% block Site_Map %}
    <a class="link" href="{{ path('loginsuccess') }}">{{ 'Home' | trans ({}, "menu") }}</a>
    <a class="link" href="{{ path('item') }}">{{ 'Items' | trans ({}, "item") }}</a>
    <a class="link" href="{{ path('item_show',{'id':item.id}) }}">{{ 'Details' | trans ({}, "item") }}</a>
    <span class="link">{{ 'Edit' | trans ({}, "common") }}</span>
{% endblock Site_Map %}

{% set MU = 'item' %}

{% block Tab %}
    <div class="widget-header">
        <h3>{{ 'Details' | trans ({}, "item") }}</h3>
    </div> <!-- /widget-header -->

    <form action="#"  method="post" {{ form_enctype(edit_form) }} class="form-horizontal">

        <div class="control-group">
            {{ form_label(edit_form.itemName) }}
            {{ form_widget(edit_form.itemName) }}
            {{ form_errors(edit_form.itemName) }}
        </div>
        <div class="control-group">
            {{ form_label(edit_form.itemFaceValue) }}
            {{ form_widget(edit_form.itemFaceValue,{ 'attr' : {'onkeydown' : 'return ( event.ctrlKey || event.altKey
						|| (47<event.keyCode && event.keyCode<58 && event.shiftKey==false)
						|| (95<event.keyCode && event.keyCode<106)
						|| (event.keyCode==8) || (event.keyCode==9)
						|| (event.keyCode>34 && event.keyCode<40)
						|| (event.keyCode==46) )'} }) }}
            {{ form_errors(edit_form.itemFaceValue) }}
        </div>
        <div class="control-group">
            {{ form_label(edit_form.itemCurrency) }}
            <div class="controls">
                {{ form_widget(edit_form.itemCurrency) }}
            </div>
            {{ form_errors(edit_form.itemCurrency) }}
        </div>
        <div class="control-group">
            {{ form_label(edit_form.itemType) }}
            <div class="controls">
                {{ form_widget(edit_form.itemType) }}
            </div>
            {{ form_errors(edit_form.itemType) }}
        </div>
        <div class="control-group">
            {{ form_label(edit_form.alertMinStock) }}
            {{ form_widget(edit_form.alertMinStock,{ 'attr' : {'onkeydown' : 'return ( event.ctrlKey || event.altKey
						|| (47<event.keyCode && event.keyCode<58 && event.shiftKey==false)
						|| (95<event.keyCode && event.keyCode<106)
						|| (event.keyCode==8) || (event.keyCode==9)
						|| (event.keyCode>34 && event.keyCode<40)
						|| (event.keyCode==46) )'} }) }}
            {{ form_errors(edit_form.alertMinStock) }}
        </div>
        <div class="control-group">
            {{ form_label(edit_form.operator) }}
            <div class="controls">
                {{ form_widget(edit_form.operator) }}
            </div>
            {{ form_errors(edit_form.operator) }}
        </div>

        <div class="control-group">
            {{ form_label(edit_form.itemCode) }}
            <div class="controls money">
            {{ form_widget(edit_form.itemCode,{ 'attr' : {'onfocus' : 'if($(this).val()=="")updateItemCode()'} }) }}
            <img src="{{ asset('bundles/hellodi/img/refresh/refresh.png') }}" style="cursor: pointer" id="refresh1" onclick="updateItemCode()">
                </div>
            {{ form_errors(edit_form.itemCode) }}
        </div>

        <div class="control-group">
            {{ form_label(edit_form.Country) }}
            <div class="controls">
                {{ form_widget(edit_form.Country) }}
            </div>
            {{ form_errors(edit_form.Country) }}
        </div>

        {{ form_widget(edit_form._token) }}

        <div class="form-actions" style="margin-bottom: 0">
            <input type="submit" class="btn btn-primary" value="{{ 'Update' | trans ({}, "common") }}"/>
            <a href="{{ path('item_show',{'id':item.id}) }}" class="btn">{{ 'Cancel' | trans ({}, "common") }}</a>
        </div>
    </form>

    <script type="text/javascript">
        function updateItemCode()
        {
            country_id = $("#Item_Country").val();
            item_type = $("#Item_itemType").val();
            operator_id = $("#Item_operator").val();
            item_name = $("#Item_itemName").val();

            if(country_id != "" && item_type!="" && operator_id!="" && item_name!="")
            {
                $("#refresh1").attr('src','{{ asset('bundles/hellodi/img/refresh/loading.gif') }}');
                $.post('{{ path('item_create_itemCode') }}',{countryid:country_id, itemtype:item_type, operatorid:operator_id, itemname:item_name},function(result){
                    $("#refresh1").attr('src','{{ asset('bundles/hellodi/img/refresh/refresh.png') }}');
                    $("#Item_itemCode").val(result);
                });
            }
        }
    </script>
{% endblock %}